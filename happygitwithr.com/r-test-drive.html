<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 19 Render an R script | Happy Git and GitHub for the useR</title>
<meta name="author" content="Jenny Bryan, the STAT 545 TAs, Jim Hester">
<meta name="description" content="An underappreciated fact is that much of what you can do with R Markdown, you can also do with an R script. If you’re in analysis mode and want a report as a side effect, write an R script. If...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 19 Render an R script | Happy Git and GitHub for the useR">
<meta property="og:type" content="book">
<meta property="og:url" content="https://happygitwithr.com/r-test-drive.html">
<meta property="og:image" content="https://happygitwithr.com//img/watch-me-diff-watch-me-rebase-smaller.png">
<meta property="og:description" content="An underappreciated fact is that much of what you can do with R Markdown, you can also do with an R script. If you’re in analysis mode and want a report as a side effect, write an R script. If...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 19 Render an R script | Happy Git and GitHub for the useR">
<meta name="twitter:site" content="@jennybryan">
<meta name="twitter:description" content="An underappreciated fact is that much of what you can do with R Markdown, you can also do with an R script. If you’re in analysis mode and want a report as a side effect, write an R script. If...">
<meta name="twitter:image" content="https://happygitwithr.com//img/watch-me-diff-watch-me-rebase-smaller.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131856976-1"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-131856976-1');
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="r-test-drive.html#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Happy Git and GitHub for the useR</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Let’s Git started</a></li>
<li><a class="" href="big-picture.html"><span class="header-section-number">1</span> Why Git? Why GitHub?</a></li>
<li><a class="" href="contrib.html"><span class="header-section-number">2</span> Contributors</a></li>
<li><a class="" href="workshops.html"><span class="header-section-number">3</span> Workshops</a></li>
<li class="book-part">Installation</li>
<li><a class="" href="install-intro.html">Half the battle</a></li>
<li><a class="" href="github-acct.html"><span class="header-section-number">4</span> Register a GitHub account</a></li>
<li><a class="" href="install-r-rstudio.html"><span class="header-section-number">5</span> Install or upgrade R and RStudio</a></li>
<li><a class="" href="install-git.html"><span class="header-section-number">6</span> Install Git</a></li>
<li><a class="" href="hello-git.html"><span class="header-section-number">7</span> Introduce yourself to Git</a></li>
<li><a class="" href="git-client.html"><span class="header-section-number">8</span> Install a Git client</a></li>
<li class="book-part">Connect Git, GitHub, RStudio</li>
<li><a class="" href="connect-intro.html">Can you hear me now?</a></li>
<li><a class="" href="https-pat.html"><span class="header-section-number">9</span> Personal access token for HTTPS</a></li>
<li><a class="" href="ssh-keys.html"><span class="header-section-number">10</span> Set up keys for SSH</a></li>
<li><a class="" href="push-pull-github.html"><span class="header-section-number">11</span> Connect to GitHub</a></li>
<li><a class="" href="rstudio-git-github.html"><span class="header-section-number">12</span> Connect RStudio to Git and GitHub</a></li>
<li><a class="" href="rstudio-see-git.html"><span class="header-section-number">13</span> Detect Git from RStudio</a></li>
<li><a class="" href="troubleshooting.html"><span class="header-section-number">14</span> RStudio, Git, GitHub Hell</a></li>
<li class="book-part">Early GitHub Wins</li>
<li><a class="" href="usage-intro.html">Get started with GitHub</a></li>
<li><a class="" href="new-github-first.html"><span class="header-section-number">15</span> New project, GitHub first</a></li>
<li><a class="" href="existing-github-first.html"><span class="header-section-number">16</span> Existing project, GitHub first</a></li>
<li><a class="" href="existing-github-last.html"><span class="header-section-number">17</span> Existing project, GitHub last</a></li>
<li><a class="" href="rmd-test-drive.html"><span class="header-section-number">18</span> Test drive R Markdown</a></li>
<li><a class="active" href="r-test-drive.html"><span class="header-section-number">19</span> Render an R script</a></li>
<li class="book-part">Git fundamentals</li>
<li><a class="" href="git-intro.html">Some Git basics</a></li>
<li><a class="" href="git-basics.html"><span class="header-section-number">20</span> Repo, commit, diff, tag</a></li>
<li><a class="" href="git-commands.html"><span class="header-section-number">21</span> Git commands</a></li>
<li><a class="" href="git-branches.html"><span class="header-section-number">22</span> Branches</a></li>
<li><a class="" href="git-remotes.html"><span class="header-section-number">23</span> Remotes</a></li>
<li class="book-part">Remote setups</li>
<li><a class="" href="remote-scenarios-intro.html">Git remote setups</a></li>
<li><a class="" href="common-remote-setups.html"><span class="header-section-number">24</span> Common remote setups</a></li>
<li><a class="" href="equivocal.html"><span class="header-section-number">25</span> Equivocal remote setups</a></li>
<li class="book-part">Daily Workflows</li>
<li><a class="" href="workflows-intro.html">Useful Git patterns for real life</a></li>
<li><a class="" href="repeated-amend.html"><span class="header-section-number">26</span> The Repeated Amend</a></li>
<li><a class="" href="push-rejected.html"><span class="header-section-number">27</span> Dealing with push rejection</a></li>
<li><a class="" href="pull-tricky.html"><span class="header-section-number">28</span> Pull, but you have local work</a></li>
<li><a class="" href="time-travel-see-past.html"><span class="header-section-number">29</span> Time travel: See the past</a></li>
<li><a class="" href="fork-and-clone.html"><span class="header-section-number">30</span> Fork and clone</a></li>
<li><a class="" href="upstream-changes.html"><span class="header-section-number">31</span> Get upstream changes for a fork</a></li>
<li><a class="" href="pr-extend.html"><span class="header-section-number">32</span> Explore and extend a pull request</a></li>
<li><a class="" href="workflows-browsability.html"><span class="header-section-number">33</span> Make a GitHub repo browsable</a></li>
<li class="book-part">Activity prompts</li>
<li><a class="" href="clone.html"><span class="header-section-number">34</span> Clone a repo</a></li>
<li><a class="" href="bingo.html"><span class="header-section-number">35</span> Create a bingo card</a></li>
<li><a class="" href="burn.html"><span class="header-section-number">36</span> Burn it all down</a></li>
<li><a class="" href="reset.html"><span class="header-section-number">37</span> Resetting</a></li>
<li><a class="" href="search.html"><span class="header-section-number">38</span> Search GitHub</a></li>
<li class="book-part">Notes</li>
<li><a class="" href="notes-intro.html">Notes</a></li>
<li><a class="" href="classroom-overview.html"><span class="header-section-number">39</span> Run a course with GitHub</a></li>
<li><a class="" href="ideas-for-content.html"><span class="header-section-number">40</span> Ideas for content</a></li>
<li><a class="" href="bookdown-cheat-sheet.html"><span class="header-section-number">41</span> Bookdown cheat sheet</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="shell.html"><span class="header-section-number">A</span> The shell</a></li>
<li><a class="" href="comic-relief.html"><span class="header-section-number">B</span> Comic relief</a></li>
<li><a class="" href="resources.html"><span class="header-section-number">C</span> Resources</a></li>
<li><a class="" href="references.html"><span class="header-section-number">D</span> References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jennybc/happy-git-with-r">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-test-drive" class="section level1">
<h1>
<span class="header-section-number">19</span> Render an R script<a class="anchor" aria-label="anchor" href="r-test-drive.html#r-test-drive"><i class="fas fa-link"></i></a>
</h1>
<p>An underappreciated fact is that much of what you can do with R Markdown, you can also do with an R script.</p>
<p>If you’re in analysis mode and want a report as a side effect, write an R script. If you’re writing a report with a lot of R code in it, write Rmd. In either case, render to markdown and/or HTML to communicate with other human beings.</p>
<ul>
<li>In R markdown, prose is top-level and code is tucked into chunks.</li>
<li>In R scripts, code is top-level and prose is tucked into comments. You will use <code>#'</code> to request that certain comments appear as top-level prose in the rendered output.</li>
</ul>
<p>You will continue to specify things like the output format via YAML at the top of the file. This will need to be commented with <code>#'</code>.</p>
<div id="morph-r-markdown-into-a-renderable-r-script" class="section level2">
<h2>
<span class="header-section-number">19.1</span> Morph R Markdown into a renderable R script<a class="anchor" aria-label="anchor" href="r-test-drive.html#morph-r-markdown-into-a-renderable-r-script"><i class="fas fa-link"></i></a>
</h2>
<p>Get yourself a working R Markdown file, such as the one you made in your <a href="rmd-test-drive.html#rmd-test-drive">Rmd test drive</a>. Or use the boilerplate Rmd document RStudio makes with <em>File &gt; New File &gt; R Markdown …</em>.</p>
<p>Save the file as <code>foo.R</code>, as opposed to <code>foo.Rmd</code>. Yes, for a brief moment, you will have R Markdown saved as an R script, but that won’t be true for long.</p>
<p>Transform the Rmd to R:</p>
<ul>
<li><p>Anything that’s not R code? Like the YAML and the English prose? Protect it with roxygen-style comments: start each line with <code>#'</code>.</p></li>
<li>
<p>Anything that’s R code? Let it exist “as is” as top-level code. That means you’ll need to change the syntax of R chunk headers like so:</p>
<p>Before: <code>```{r setup, include = FALSE}</code><br>
After: <code>#+ r setup, include = FALSE</code></p>
<p>Replace the leading backticks and opening curly brace with <code>#+</code>.<br>
Delete the trailing curly brace.<br>
Delete the 3 backticks that end each chunk.</p>
</li>
</ul>
<p>Render the R script through one of these methods:</p>
<ul>
<li>Click on the “notebook” icon in RStudio to “Compile Report”.</li>
<li>In RStudio, do <em>File &gt; Knit Document</em>.</li>
<li>In R, do <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">rmarkdown::render("foo.R")</a></code>.</li>
</ul>
<p>You’ll get a markdown and/or HTML report, just as with R Markdown.</p>
<p>If you’re having trouble making all the necessary changes and you’re frustrated, see below for an example you can copy and paste.</p>
<p>All the workflow tips from the <a href="rmd-test-drive.html#rmd-test-drive">Rmd test drive</a> apply here: when you script an analysis, render it to markdown, commit the <code>.R</code>, the <code>.md</code>, any associated figures, and push to GitHub. Collaborators can see your code but also browse the result without running it. This makes the current state of your analysis accessible to someone who does not even run R or who wants to take a quick look at things from a cell phone or while on vacation.</p>
</div>
<div id="write-a-render-ready-r-script" class="section level2">
<h2>
<span class="header-section-number">19.2</span> Write a render-ready R script<a class="anchor" aria-label="anchor" href="r-test-drive.html#write-a-render-ready-r-script"><i class="fas fa-link"></i></a>
</h2>
<p>Instead of morphing an R Markdown file, let’s create a render-ready R script directly.</p>
<p>Create a new R script and copy/paste this code into it.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' Here's some prose in a very special comment. Let's summarize the built-in</span>
<span class="co">#' dataset `VADeaths`.</span>
<span class="co">## here is a regular code comment, that will remain as such</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">VADeaths</span><span class="op">)</span>

<span class="co">#' Here's some more prose. I can use usual markdown syntax to make things</span>
<span class="co">#' **bold** or *italics*. Let's use an example from the `dotchart()` help to</span>
<span class="co">#' make a Cleveland dot plot from the `VADeaths` data. I even bother to name</span>
<span class="co">#' this chunk, so the resulting PNG has a decent name.</span>
<span class="co">#+ dotchart</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/dotchart.html">dotchart</a></span><span class="op">(</span><span class="va">VADeaths</span>, main <span class="op">=</span> <span class="st">"Death Rates in Virginia - 1940"</span><span class="op">)</span></code></pre></div>
<p>Render the R script through one of these methods:</p>
<ul>
<li>Click on the “notebook” icon in RStudio to “Compile Report”.</li>
<li>In RStudio, do <em>File &gt; Knit Document</em>.</li>
<li>In R, do <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">rmarkdown::render("YOURSCRIPT.R")</a></code>.</li>
</ul>
<p>Revel in your attractive looking report with almost zero effort! Seriously, all you had to do was think about when to use special comments <code>#'</code> in order to promote that to nicely rendered text.</p>
<p>Drawing on the workflow tips in <a href="rmd-test-drive.html#rmd-test-drive">Rmd test drive</a>, let’s add some YAML frontmatter, properly commented with <code>#'</code>, and request the <code>github_document</code>. Here’s the whole script again:</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' ---</span>
<span class="co">#' title: "R scripts can be rendered!"</span>
<span class="co">#' author: "Jenny Bryan"</span>
<span class="co">#' date: "April 1, 2014"</span>
<span class="co">#' output: github_document</span>
<span class="co">#' ---</span>
<span class="co">#'</span>
<span class="co">#' Here's some prose in a very special comment. Let's summarize the built-in</span>
<span class="co">#' dataset `VADeaths`.</span>
<span class="co">## here is a regular code comment, that will remain as such</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">VADeaths</span><span class="op">)</span>

<span class="co">#' Here's some more prose. I can use usual markdown syntax to make things</span>
<span class="co">#' **bold** or *italics*. Let's use an example from the `dotchart()` help to</span>
<span class="co">#' make a Cleveland dot plot from the `VADeaths` data. I even bother to name</span>
<span class="co">#' this chunk, so the resulting PNG has a decent name.</span>
<span class="co">#+ dotchart</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/dotchart.html">dotchart</a></span><span class="op">(</span><span class="va">VADeaths</span>, main <span class="op">=</span> <span class="st">"Death Rates in Virginia - 1940"</span><span class="op">)</span></code></pre></div>
<p>Behind the scenes here we have used <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">rmarkdown::render()</a></code> to render this script and you can go <a href="https://github.com/jennybc/happy-git-with-r/blob/master/render-r-script-demo.md">visit it on GitHub</a>.</p>

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="rmd-test-drive.html"><span class="header-section-number">18</span> Test drive R Markdown</a></div>
<div class="next"><a href="git-intro.html">Some Git basics</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="r-test-drive.html#r-test-drive"><span class="header-section-number">19</span> Render an R script</a></li>
<li><a class="nav-link" href="r-test-drive.html#morph-r-markdown-into-a-renderable-r-script"><span class="header-section-number">19.1</span> Morph R Markdown into a renderable R script</a></li>
<li><a class="nav-link" href="r-test-drive.html#write-a-render-ready-r-script"><span class="header-section-number">19.2</span> Write a render-ready R script</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jennybc/happy-git-with-r/blob/master/usage-r-script-and-github.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jennybc/happy-git-with-r/edit/master/usage-r-script-and-github.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Happy Git and GitHub for the useR</strong>" was written by Jenny Bryan, the STAT 545 TAs, Jim Hester. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
